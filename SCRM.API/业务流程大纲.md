# 微信客服系统业务流程大纲

## 一、设备与账号管理

### 1.1 设备授权
- 设备获取通信token（手机客户端、客服客户端）
- 设备授权及退出
- 账号强制下线通知
- 通知重定向连接ip端口

### 1.2 微信账号状态
- 微信上线通知
- 微信下线通知
- 微信账号登出操作
- 手机上传当前SDK安装版本通知

---

## 二、好友管理

### 2.1 添加好友
- 主动添加好友请求（搜索微信号/手机号）
- 接受好友添加请求
- 通讯录加好友
- 群内加好友
- 名片加好友
- 扫二维码加群

### 2.2 好友信息管理
- 获取好友列表
- 获取联系人详细信息
- 修改好友备注
- 删除好友
- 联系人标签创建/修改/删除
- 设置用户标签

### 2.3 好友通知
- 好友添加通知
- 好友移除通知
- 好友信息变更通知
- 加好友请求列表

---

## 三、消息通信

### 3.1 消息发送
- 给好友发消息（文本/图片/语音/视频/文件/名片/位置/链接/小程序/表情）
- 群发消息
- 批量发送多张图片
- 转发消息
- 转发合并消息（聊天记录转发）
- 发送接龙消息

### 3.2 消息接收
- 好友发送的聊天消息通知
- 手机上回复好友的聊天消息通知
- 请求图片/视频消息的详细数据
- 聊天消息文件推送（图片/视频/文件等）

### 3.3 消息管理
- 消息标记为已读
- 消息撤回
- 清空聊天记录
- 获取历史聊天记录
- 根据msgSvrId获取聊天消息
- 语音消息转文字
- 获取聊天消息原始数据（XML）

---

## 四、群聊管理

### 4.1 群基础操作
- 获取群聊列表
- 获取群详细信息
- 获取群二维码
- 群聊创建通知
- 群聊删除通知
- 群聊信息变更通知

### 4.2 群成员管理
- 群聊公告
- 群内加好友
- 群普通/群主确认入群邀请
- 同意邀请入群

### 4.3 群消息
- 群内发消息
- 群成员信息（含管理员）

---

## 五、朋友圈

### 5.1 发布与删除
- 发布朋友圈（文字/图片/视频/链接）
- 删除朋友圈

### 5.2 互动
- 朋友圈点赞/取消点赞
- 朋友圈评论回复
- 朋友圈评论删除
- 停止朋友圈点赞任务

### 5.3 数据获取
- 获取好友朋友圈列表
- 获取指定好友的朋友圈
- 获取朋友圈图片
- 朋友圈发布通知
- 朋友圈删除通知
- 点赞/取消点赞通知
- 评论/删除评论通知

---

## 六、钱包与红包

### 6.1 红包
- 领取红包/转账
- 发红包
- 查询红包详情

### 6.2 钱包
- 查询钱包余额
- 微信转账

---

## 七、公众号与小程序

### 7.1 公众号
- 获取公众号列表
- 关注公众号通知
- 关键词搜索公众号或小程序

### 7.2 小程序
- 小程序消息处理

---

## 八、会话管理

### 8.1 会话列表
- 获取会话列表
- 会话列表推送

### 8.2 会话操作
- 通知手机将某好友窗口标为已读
- 获取时间段内的聊天消息MsgSvrId

---

## 九、设备与手机操作

### 9.1 手机控制
- 手机操作指令（重启手机等）
- 查询手机状态（电量、剩余存储空间等）
- 通过微信查询手机位置

### 9.2 微信设置
- 微信设置（昵称、头像）
- 要求手机上传当前微信二维码

---

## 十、其他功能

### 10.1 检测任务
- 好友检测（僵尸粉检测）
- 停止好友检测

### 10.2 系统通知
- 升级通知版本更新
- 删除设备通知手机端
- 通知手机客户端更新升级

---

## 十一、权限管理（后台）

### 11.1 权限层级
- 平台级权限（服务器管理员、客服运维管理员）
- BOSS级权限（多账户组管理）
- 组长级权限（分配账户组）
- 单账户级权限
- 临时金主权限（付费控制）
- 临时认证权限（实名认证）

### 11.2 敏感权限控制
- 删除聊天记录权限
- 通话/录音权限
- 转账/红包权限
- 微信号获取展示权限
